function t(t,n,e,i){Object.defineProperty(t,n,{get:e,set:i,enumerable:!0,configurable:!0})}var n={};t(n,"DIR_TO_VEC",(()=>e)),t(n,"DIRS_4",(()=>i)),t(n,"DIRS_3_TOP",(()=>o)),t(n,"asDir",(()=>r)),t(n,"signed",(()=>s)),t(n,"add",(()=>a)),t(n,"sub",(()=>f)),t(n,"fromDir",(()=>c)),t(n,"zero",(()=>h)),t(n,"vec",(()=>u)),t(n,"x",(()=>l)),t(n,"y",(()=>d)),t(n,"isVec",(()=>m)),t(n,"eq",(()=>p)),t(n,"min",(()=>g)),t(n,"max",(()=>b)),t(n,"segment",(()=>y)),t(n,"cLen",(()=>x)),t(n,"ZERO",(()=>v));const e={U:[0,1],R:[1,0],D:[0,-1],L:[-1,0],UR:[1,1],UL:[-1,1]},i=[e.U,e.R,e.D,e.L],o=[e.UL,e.U,e.UR],r=t=>{if(t in e)return t;throw new Error(`Invalid direction: ${t}`)},s=([t,n])=>[Math.sign(t),Math.sign(n)],a=([t,n],[e,i])=>[t+e,n+i],f=([t,n],[e,i])=>[t-e,n-i],c=t=>e[t],h=()=>[0,0],u=(t,n)=>[t,n],l=t=>t[0],d=t=>t[1],m=t=>Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1],p=(t,n)=>t[0]===n[0]&&t[1]===n[1],g=(t,n)=>[Math.min(t[0],n[0]),Math.min(t[1],n[1])],b=(t,n)=>[Math.max(t[0],n[0]),Math.max(t[1],n[1])];function*y(t,n){const e=f(n,t),i=s(e),o=x(t,n);let r=t;yield r;for(let t=0;t<o;t++)r=a(r,i),yield r}const v=h(),x=(t,n=h())=>Math.max(Math.abs(t[0]-n[0]),Math.abs(t[1]-n[1]));function $(t,n,e){let i=e,o=0;for(const e of t)i=n(i,e,o++);return i}function _(t){return Array.from(t)}function w(t){return function*(t,n){const e=t[Symbol.iterator](),i=n[Symbol.iterator]();for(;;){const{value:t,done:n}=e.next(),{value:o,done:r}=i.next();if(n||r)return;yield[t,o]}}(function*(t,n,e=1){void 0===t&&(t=0),void 0===n&&(n=t,t=0),void 0===e&&(e=1);for(let i=t;i<n;i+=e)yield i}(1/0),t)}function M(t,n){let e=0;for(const i of t){if(n(i))return e;e++}return-1}const E=t=>{const n={[Symbol.iterator]:()=>t[Symbol.iterator](),map:n=>E(function*(t,n){for(const e of t)yield n(e)}(t,n)),groupsOf:n=>E(function*(t,n){let e=[];for(const i of t)e.push(i),e.length===n&&(yield e,e=[]);e.length>0&&(yield e)}(t,n)),toArray:()=>_(t),first:()=>function(t){for(const n of t)return n}(t),last:()=>function(t){let n;for(const e of t)n=e;return n}(t),find:n=>function(t,n){for(const e of t)if(n(e))return e}(t,n),skip:n=>E(function*(t,n){for(const e of t)0===n?yield e:n-=1}(t,n)),take:n=>E(function*(t,n){for(const e of t){if(0===n)return;yield e,n-=1}}(t,n)),toSet:()=>new Set(t),reduce:(n,e)=>$(t,n,e),forEach:n=>{for(const e of t)n(e)},filter:n=>E(function*(t,n){for(const e of t)n(e)&&(yield e)}(t,n)),count:n=>function(t,n=(()=>!0)){let e=0;for(const i of t)n(i)&&(e+=1);return e}(t,n),indexed:()=>E(w(t)),windowed:n=>E(function*(t,n){const e=[];for(const i of t)e.push(i),e.length===n&&(yield e,e.shift())}(t,n)),findIndex:n=>M(t,n),indexOf:n=>function(t,n){return M(t,(t=>t===n))}(t,n),flatMap:n=>E(function*(t,n){for(const e of t)yield*n(e)}(t,n)),skipLast:n=>E(function*(t,n=1){if(n<=0)return void(yield*t);const e=Array(n);let i=0;for(const o of t)i>=n&&(yield e[i%n]),e[i%n]=o,i++}(t,n)),takeEvery:(n,e)=>E(function*(t,n,e=0){if(!(n<=0)){e<0&&(e=0);for(const i of t)0===e&&(yield i,e=n),e--}}(t,n,e)),takeWhile:n=>E(function*(t,n){for(const e of t){if(!n(e))return;yield e}}(t,n)),takeUntil:n=>E(function*(t,n){for(const e of t){if(n(e))return;yield e}}(t,n)),every:n=>function(t,n){for(const e of t)if(!n(e))return!1;return!0}(t,n),updateAt:(n,e)=>E(function*(t,n,e){let i=0;for(const o of t)i===n?yield e(o):yield o,i++}(t,n,e)),unshift:(...n)=>E(function*(t,...n){yield*n,yield*t}(t,...n)),skipAfter:n=>E(function*(t,n){for(const e of t)if(yield e,n(e))return}(t,n)),sum:()=>$(t,Y,0),min:()=>n.reduce(Math.min,1/0),max:()=>n.reduce(Math.max,-1/0),join:(n=",")=>_(t).join(n)};return n};function S(t){return t.split("\n")}function Y(t,n){return t+n}function X(...t){return t}function R(t,e){if(!e)return t;if("vec"===e){const[e,i]=t.split(",").map(Number);return n.vec(e,i)}if("int"===e)return parseInt(t,10);if(e.endsWith("[]")){const n=function(t){const n=[" -> ",", ",","," - ","-"," "];for(const e of n)if(t.includes(e))return e;return null}(t);if(!n)return[R(t,e.slice(0,-2))];const i=e.slice(0,-2);return t.split(n).map((t=>R(t,i)))}return t}class k{constructor(t=((t,n)=>Number(t>n))){this._heap=[],this._comparator=t}[Symbol.iterator](){return{next:()=>this.size()>1?{value:this.pop(),done:!1}:{done:!0,value:this.pop()}}}size(){return this._heap.length}isEmpty(){return 0==this.size()}peek(){return this._heap[0]}push(...t){return t.forEach((t=>{this._heap.push(t),this._siftUp()})),this.size()}pop(){const t=this.peek(),n=this.size()-1;return n>0&&this._swap(0,n),this._heap.pop(),this._siftDown(),t}replace(t){const n=this.peek();return this._heap[0]=t,this._siftDown(),n}_greater(t,n){return this._comparator(this._heap[t],this._heap[n])<0}_swap(t,n){[this._heap[t],this._heap[n]]=[this._heap[n],this._heap[t]]}_siftUp(){let t=this.size()-1;for(;t>0&&this._greater(t,$520099a91db9fbc3$var$parent(t));)this._swap(t,$520099a91db9fbc3$var$parent(t)),$520099a91db9fbc3$var$parent(t)}_siftDown(){let t=0;for(;$520099a91db9fbc3$var$left(t)<this.size()&&this._greater($520099a91db9fbc3$var$left(t),t)||$520099a91db9fbc3$var$right(t)<this.size()&&this._greater($520099a91db9fbc3$var$right(t),t);){let n=$520099a91db9fbc3$var$right(t)<this.size()&&this._greater($520099a91db9fbc3$var$right(t),$520099a91db9fbc3$var$left(t))?$520099a91db9fbc3$var$right(t):$520099a91db9fbc3$var$left(t);this._swap(t,n),n}}}class L{static fromArray(t){const n=new L;return t.forEach(((t,e)=>{t.forEach(((t,i)=>{n.set(u(i,e),t)}))})),n}#t=t=>i.map((n=>a(t,n))).filter((t=>this.hasPos(t)));#n=new Map;#e=1/0;#i=1/0;#o=-1/0;#r=-1/0;#s=!1;get bounds(){return this.#s&&this.#a(),{minX:this.#e,minY:this.#i,maxX:this.#o,maxY:this.#r,botRight:u(this.#o,this.#r),topLeft:u(this.#e,this.#i)}}get height(){return this.#r-this.#i+1}get width(){return this.#o-this.#e+1}constructor(t=[]){for(const[n,e]of t)this.set(n,e)}#a(){this.#n.forEach(((t,n)=>{t.forEach(((t,e)=>{this.#f(e,n)}))})),this.#s=!1}#f(t,n){this.#e=Math.min(this.#e,t),this.#i=Math.min(this.#i,n),this.#o=Math.max(this.#o,t),this.#r=Math.max(this.#r,n)}get([t,n]){return this.#n.get(t)?.get(n)}set([t,n],e){return!1===this.#n.has(t)&&this.#n.set(t,new Map),this.#n.get(t).set(n,e),this.#f(t,n),this}hasPos([t,n]){return!0===this.#n.get(t)?.has(n)}map(t){const n=new L;for(const{pos:e,value:i}of this)n.set(e,t(i,e));return n}bfs(t,n){return function*(t,n,e,i){const o=[];if(m(e))o.push({distance:0,pos:e,value:t.get(e),parent:null});else for(const n of e)o.push({distance:0,pos:n,value:t.get(n),parent:null});const r=new Set;for(;o.length;){const e=o.shift(),s=e.pos.join();if(!r.has(s)){r.add(s),yield e;for(const r of i(e.pos)){const i={distance:e.distance+1,pos:r,value:t.get(r),parent:e};n(e,i)&&o.push(i)}}}}(this,t,n,this.#t)}setGetNeighbors(t){return this.#t=t,this}[Symbol.iterator](){return function*(t){for(const n of t.keys())for(const e of t.get(n).keys())yield{pos:u(n,e),value:t.get(n).get(e)}}(this.#n)}to2dArray({topLeftPos:t=u(this.#e,this.#i),botRightPos:n=u(this.#o,this.#r),valToString:e}){const[i,o]=t,[r,s]=n,a=[];for(let t=o;t<=s;t++){const n=[];for(let o=i;o<=r;o++){const i=this.get([o,t]);n.push(e(i))}a.push(n)}return a}toString({topLeftPos:t=u(this.#e,this.#i),botRightPos:n=u(this.#o,this.#r),valToString:e=(t=>(t??".").toString())}={}){return this.to2dArray({topLeftPos:t,botRightPos:n,valToString:e}).map((t=>t.join(""))).join("\n")}}const P=n.vec(500,0);function D(t){const e=S(t.trimEnd()).map((i="vec[]",t=>R(t,i)));var i;const o=E(e).flatMap((t=>E(t).windowed(2).flatMap((([t,e])=>n.segment(t,e))))).map((t=>X(t,"#")));return new L(o).set(P,"+")}function*A(t,e=t.bounds.maxY){const i=n.vec(0,1),o=n.vec(-1,1),r=n.vec(1,1);function s(s){let a=s;for(;;){if(n.y(a)>=e)return null;const s=n.add(a,i);if(!1===t.hasPos(s)){a=s;continue}const f=n.add(a,o);if(!1===t.hasPos(f)){a=f;continue}const c=n.add(a,r);if(!1!==t.hasPos(c))return a;a=c}}for(;;){const e=s(P);if(null===e||n.eq(e,P))return;t.set(e,"o"),yield e}}const I=document.getElementById("canvas");if(!(I instanceof HTMLCanvasElement))throw new Error("no canvas");const z=I.getContext("2d");if(!z)throw new Error("no ctx");let B=0;const U=document.getElementById("input-form");if(!(U instanceof HTMLFormElement))throw new Error("no form");U.addEventListener("submit",(function(t){t.preventDefault();!function(t,n){clearInterval(B);const e=D(t),{width:i,height:o,bounds:r}=e,s=Math.min(10,Math.max(4,100/i));n.canvas.width=i*s,n.canvas.height=o*s,n.canvas.scrollIntoView({behavior:"smooth"});const a={"+":"orange",o:"orange","#":"gray",".":"darkblue"},f=A(e),c=(f.next().value?.[1]??0)-r.minY;function h(){const t=e.to2dArray({valToString:t=>t??"."});t.forEach(((t,e)=>{t.forEach(((t,i)=>{n.fillStyle=a[t],n.fillRect(i*s,e*s,s,s)}))}));let i=500-r.minX;for(let t=0;t<=c;t++)n.fillStyle=a.o,n.fillRect(i*s,t*s,s,s)}h(),B=setInterval((()=>{f.next(),h()}),33)}((new FormData(this).get("input")?.toString()??"").trim(),z)}));
//# sourceMappingURL=index.ade8cb2f.js.map
