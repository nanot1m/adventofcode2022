function t(t,n,e,o){Object.defineProperty(t,n,{get:e,set:o,enumerable:!0,configurable:!0})}var n={};t(n,"DIR_TO_VEC",(()=>e)),t(n,"DIRS_4",(()=>o)),t(n,"DIRS_3_TOP",(()=>i)),t(n,"asDir",(()=>r)),t(n,"signed",(()=>s)),t(n,"add",(()=>a)),t(n,"sub",(()=>f)),t(n,"fromDir",(()=>c)),t(n,"zero",(()=>h)),t(n,"vec",(()=>u)),t(n,"x",(()=>l)),t(n,"y",(()=>d)),t(n,"isVec",(()=>m)),t(n,"eq",(()=>p)),t(n,"min",(()=>g)),t(n,"max",(()=>b)),t(n,"segment",(()=>y)),t(n,"cLen",(()=>x)),t(n,"ZERO",(()=>v));const e={U:[0,1],R:[1,0],D:[0,-1],L:[-1,0],UR:[1,1],UL:[-1,1]},o=[e.U,e.R,e.D,e.L],i=[e.UL,e.U,e.UR],r=t=>{if(t in e)return t;throw new Error(`Invalid direction: ${t}`)},s=([t,n])=>[Math.sign(t),Math.sign(n)],a=([t,n],[e,o])=>[t+e,n+o],f=([t,n],[e,o])=>[t-e,n-o],c=t=>e[t],h=()=>[0,0],u=(t,n)=>[t,n],l=t=>t[0],d=t=>t[1],m=t=>Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1],p=(t,n)=>t[0]===n[0]&&t[1]===n[1],g=(t,n)=>[Math.min(t[0],n[0]),Math.min(t[1],n[1])],b=(t,n)=>[Math.max(t[0],n[0]),Math.max(t[1],n[1])];function*y(t,n){const e=f(n,t),o=s(e),i=x(t,n);let r=t;yield r;for(let t=0;t<i;t++)r=a(r,o),yield r}const v=h(),x=(t,n=h())=>Math.max(Math.abs(t[0]-n[0]),Math.abs(t[1]-n[1]));function $(t,n,e){let o=e,i=0;for(const e of t)o=n(o,e,i++);return o}function _(t){return Array.from(t)}function w(t){return function*(t,n){const e=t[Symbol.iterator](),o=n[Symbol.iterator]();for(;;){const{value:t,done:n}=e.next(),{value:i,done:r}=o.next();if(n||r)return;yield[t,i]}}(function*(t,n,e=1){void 0===t&&(t=0),void 0===n&&(n=t,t=0),void 0===e&&(e=1);for(let o=t;o<n;o+=e)yield o}(1/0),t)}function M(t,n){let e=0;for(const o of t){if(n(o))return e;e++}return-1}const E=t=>{const n={[Symbol.iterator]:()=>t[Symbol.iterator](),map:n=>E(function*(t,n){for(const e of t)yield n(e)}(t,n)),groupsOf:n=>E(function*(t,n){let e=[];for(const o of t)e.push(o),e.length===n&&(yield e,e=[]);e.length>0&&(yield e)}(t,n)),toArray:()=>_(t),first:()=>function(t){for(const n of t)return n}(t),last:()=>function(t){let n;for(const e of t)n=e;return n}(t),find:n=>function(t,n){for(const e of t)if(n(e))return e}(t,n),skip:n=>E(function*(t,n){for(const e of t)0===n?yield e:n-=1}(t,n)),take:n=>E(function*(t,n){for(const e of t){if(0===n)return;yield e,n-=1}}(t,n)),toSet:()=>new Set(t),reduce:(n,e)=>$(t,n,e),forEach:n=>{for(const e of t)n(e)},filter:n=>E(function*(t,n){for(const e of t)n(e)&&(yield e)}(t,n)),count:n=>function(t,n=(()=>!0)){let e=0;for(const o of t)n(o)&&(e+=1);return e}(t,n),indexed:()=>E(w(t)),windowed:n=>E(function*(t,n){const e=[];for(const o of t)e.push(o),e.length===n&&(yield e,e.shift())}(t,n)),findIndex:n=>M(t,n),indexOf:n=>function(t,n){return M(t,(t=>t===n))}(t,n),flatMap:n=>E(function*(t,n){for(const e of t)yield*n(e)}(t,n)),skipLast:n=>E(function*(t,n=1){if(n<=0)return void(yield*t);const e=Array(n);let o=0;for(const i of t)o>=n&&(yield e[o%n]),e[o%n]=i,o++}(t,n)),takeEvery:(n,e)=>E(function*(t,n,e=0){if(!(n<=0)){e<0&&(e=0);for(const o of t)0===e&&(yield o,e=n),e--}}(t,n,e)),takeWhile:n=>E(function*(t,n){for(const e of t){if(!n(e))return;yield e}}(t,n)),takeUntil:n=>E(function*(t,n){for(const e of t){if(n(e))return;yield e}}(t,n)),every:n=>function(t,n){for(const e of t)if(!n(e))return!1;return!0}(t,n),updateAt:(n,e)=>E(function*(t,n,e){let o=0;for(const i of t)o===n?yield e(i):yield i,o++}(t,n,e)),unshift:(...n)=>E(function*(t,...n){yield*n,yield*t}(t,...n)),skipAfter:n=>E(function*(t,n){for(const e of t)if(yield e,n(e))return}(t,n)),sum:()=>$(t,S,0),min:()=>n.reduce(Math.min,1/0),max:()=>n.reduce(Math.max,-1/0),join:(n=",")=>_(t).join(n)};return n};function X(t){return t.split("\n")}function S(t,n){return t+n}function Y(...t){return t}function R(t,e){if(!e)return t;if("vec"===e){const[e,o]=t.split(",").map(Number);return n.vec(e,o)}if("int"===e)return parseInt(t,10);if(e.endsWith("[]")){const n=function(t){const n=[" -> ",", ",","," - ","-"," "];for(const e of n)if(t.includes(e))return e;return null}(t);if(!n)return[R(t,e.slice(0,-2))];const o=e.slice(0,-2);return t.split(n).map((t=>R(t,o)))}return t}class k{constructor(t=((t,n)=>Number(t>n))){this._heap=[],this._comparator=t}[Symbol.iterator](){return{next:()=>this.size()>1?{value:this.pop(),done:!1}:{done:!0,value:this.pop()}}}size(){return this._heap.length}isEmpty(){return 0==this.size()}peek(){return this._heap[0]}push(...t){return t.forEach((t=>{this._heap.push(t),this._siftUp()})),this.size()}pop(){const t=this.peek(),n=this.size()-1;return n>0&&this._swap(0,n),this._heap.pop(),this._siftDown(),t}replace(t){const n=this.peek();return this._heap[0]=t,this._siftDown(),n}_greater(t,n){return this._comparator(this._heap[t],this._heap[n])<0}_swap(t,n){[this._heap[t],this._heap[n]]=[this._heap[n],this._heap[t]]}_siftUp(){let t=this.size()-1;for(;t>0&&this._greater(t,$520099a91db9fbc3$var$parent(t));)this._swap(t,$520099a91db9fbc3$var$parent(t)),$520099a91db9fbc3$var$parent(t)}_siftDown(){let t=0;for(;$520099a91db9fbc3$var$left(t)<this.size()&&this._greater($520099a91db9fbc3$var$left(t),t)||$520099a91db9fbc3$var$right(t)<this.size()&&this._greater($520099a91db9fbc3$var$right(t),t);){let n=$520099a91db9fbc3$var$right(t)<this.size()&&this._greater($520099a91db9fbc3$var$right(t),$520099a91db9fbc3$var$left(t))?$520099a91db9fbc3$var$right(t):$520099a91db9fbc3$var$left(t);this._swap(t,n),n}}}class A{static fromArray(t){const n=new A;return t.forEach(((t,e)=>{t.forEach(((t,o)=>{n.set(u(o,e),t)}))})),n}#t=t=>o.map((n=>a(t,n))).filter((t=>this.hasPos(t)));#n=new Map;#e=1/0;#o=1/0;#i=-1/0;#r=-1/0;#s=!1;get bounds(){return this.#s&&this.#a(),{minX:this.#e,minY:this.#o,maxX:this.#i,maxY:this.#r,botRight:u(this.#i,this.#r),topLeft:u(this.#e,this.#o)}}get height(){return this.#r-this.#o+1}get width(){return this.#i-this.#e+1}constructor(t=[]){for(const[n,e]of t)this.set(n,e)}#a(){this.#n.forEach(((t,n)=>{t.forEach(((t,e)=>{this.#f(e,n)}))})),this.#s=!1}#f(t,n){this.#e=Math.min(this.#e,t),this.#o=Math.min(this.#o,n),this.#i=Math.max(this.#i,t),this.#r=Math.max(this.#r,n)}get([t,n]){return this.#n.get(t)?.get(n)}set([t,n],e){return!1===this.#n.has(t)&&this.#n.set(t,new Map),this.#n.get(t).set(n,e),this.#f(t,n),this}hasPos([t,n]){return!0===this.#n.get(t)?.has(n)}map(t){const n=new A;for(const{pos:e,value:o}of this)n.set(e,t(o,e));return n}bfs(t,n){return function*(t,n,e,o){const i=[];if(m(e))i.push({distance:0,pos:e,value:t.get(e),parent:null});else for(const n of e)i.push({distance:0,pos:n,value:t.get(n),parent:null});const r=new Set;for(;i.length;){const e=i.shift(),s=e.pos.join();if(!r.has(s)){r.add(s),yield e;for(const r of o(e.pos)){const o={distance:e.distance+1,pos:r,value:t.get(r),parent:e};n(e,o)&&i.push(o)}}}}(this,t,n,this.#t)}setGetNeighbors(t){return this.#t=t,this}[Symbol.iterator](){return function*(t){for(const n of t.keys())for(const e of t.get(n).keys())yield{pos:u(n,e),value:t.get(n).get(e)}}(this.#n)}to2dArray({topLeftPos:t=u(this.#e,this.#o),botRightPos:n=u(this.#i,this.#r),valToString:e}){const[o,i]=t,[r,s]=n,a=[];for(let t=i;t<=s;t++){const n=[];for(let i=o;i<=r;i++){const o=this.get([i,t]);n.push(e(o))}a.push(n)}return a}toString({topLeftPos:t=u(this.#e,this.#o),botRightPos:n=u(this.#i,this.#r),valToString:e=(t=>(t??".").toString())}={}){return this.to2dArray({topLeftPos:t,botRightPos:n,valToString:e}).map((t=>t.join(""))).join("\n")}}const L=n.vec(500,0);function P(t){const e=X(t.trimEnd()).map((o="vec[]",t=>R(t,o)));var o;const i=E(e).flatMap((t=>E(t).windowed(2).flatMap((([t,e])=>n.segment(t,e))))).map((t=>Y(t,"#")));return new A(i).set(L,"+")}function*D(t,e=t.bounds.maxY){const o=n.vec(0,1),i=n.vec(-1,1),r=n.vec(1,1);function s(s){let a=s;for(;;){if(n.y(a)>=e)return null;const s=n.add(a,o);if(!1===t.hasPos(s)){a=s;continue}const f=n.add(a,i);if(!1===t.hasPos(f)){a=f;continue}const c=n.add(a,r);if(!1!==t.hasPos(c))return a;a=c}}for(;;){const e=s(L);if(null===e||n.eq(e,L))return;t.set(e,"o"),yield e}}const z=document.getElementById("canvas");if(!(z instanceof HTMLCanvasElement))throw new Error("no canvas");const B=z.getContext("2d");if(!B)throw new Error("no ctx");let U=0;function I(t,e,o=!1){cancelAnimationFrame(U);const i=P(t);if(o){const t=i.height+1,e=Math.min(i.bounds.minX,500-t),o=Math.max(i.bounds.maxX,500+t),r=n.segment(n.vec(e,t),n.vec(o,t));for(const t of r)i.set(t,"~")}const{width:r,height:s,bounds:a}=i,f=Math.min(10,Math.max(2,200/r));e.canvas.width=r*f,e.canvas.height=s*f,e.canvas.scrollIntoView({behavior:"smooth"});const c={"+":"orange",o:"orange","#":"gray",".":"darkblue","~":"brown"},h=D(i);i.to2dArray({valToString:t=>t??"."}).forEach(((t,n)=>{t.forEach(((t,o)=>{e.fillStyle=c[t],e.fillRect(o*f,n*f,f,f)}))}));const u=()=>{const t=h.next().value;t&&(!function([t,n],o){e.fillStyle=o,e.fillRect((t-a.minX)*f,(n-a.minY)*f,f,f)}(t,c.o),U=requestAnimationFrame(u))};u()}const T=document.getElementById("input-form");if(!(T instanceof HTMLFormElement))throw new Error("no form");T.addEventListener("submit",(function(t){t.preventDefault();const n=new FormData(this);I((n.get("input")?.toString()??"").trim(),B,"on"===n.get("part2"))}));
//# sourceMappingURL=index.77b98d8f.js.map
