function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},l={},i=n.parcelRequiree764;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in l){var t=l[e];delete l[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){l[e]=t},n.parcelRequiree764=i),i.register("5ojQ0",(function(t,n){var o,l;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>l),(e=>l=e));var i={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},l=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("5ojQ0").register(JSON.parse('{"2xBmn":"index.7b344632.js","2dmi2":"grass.d15b078f.png","gGxKH":"wall-v.5e4cbb6f.png","8i50T":"wall-h.1d5b6cad.png","iPk1y":"wall-tl.b6d54d5a.png","a1aok":"wall-tr.757e7329.png","390yF":"wall-bl.86040f9e.png","jrZHa":"wall-br.727813ea.png","iSdbY":"index.64bca685.js"}'));var r=i("7zFg5"),a=i("idVGl"),c=i("1CMLe"),s=i("jOfNW");const d=e=>{const t=new(0,s.Map2d),n=(0,c.readLines)(e);for(let e=1;e<n.length-1;e++)for(let o=1;o<n[e].length-1;o++)t.set(a.V.vec(o-1,e-1),n[e][o]);return t};function u(e,t,n){return f.u(e,t,n)||f.d(e,t,n)||f.l(e,t,n)||f.r(e,t,n)}const f={u:(e,[t,n],o)=>"^"===e.get([t,(0,c.mod)(n+o,e.height)]),d:(e,[t,n],o)=>"v"===e.get([t,(0,c.mod)(n-o,e.height)]),l:(e,[t,n],o)=>"<"===e.get([(0,c.mod)(t+o,e.width),n]),r:(e,[t,n],o)=>">"===e.get([(0,c.mod)(t-o,e.width),n])};function h(e){const t=[];for(;e;)t.push(e),e=e[2];return t.reverse()}function g(e,t,n,o,l){return[...a.V.DIRS_4,a.V.ZERO].map((e=>a.V.add(o,e))).filter((o=>!u(e,o,l+1)&&(a.V.eq(o,t)||a.V.eq(o,n)||e.has(o))))}function w(e,t,n,o){for(;u(e,t,o);)o++;const l=function(t,n,o){const l=[[t,o,null]],i=new Set;for(;l.length>0;){const o=l.shift(),[r,c]=o;if(a.V.eq(r,n))return o;const s=r.toString()+":"+c;if(!i.has(s)){i.add(s);for(const i of g(e,t,n,r,c))l.push([i,c+1,o])}}throw new Error("No path found")}(t,n,o);return l}var m;s=i("jOfNW");m=new URL("../"+i("5ojQ0").resolve("2dmi2"),import.meta.url).toString();var v;v=new URL("../"+i("5ojQ0").resolve("gGxKH"),import.meta.url).toString();var p;p=new URL("../"+i("5ojQ0").resolve("8i50T"),import.meta.url).toString();var S;S=new URL("../"+i("5ojQ0").resolve("iPk1y"),import.meta.url).toString();var R;R=new URL("../"+i("5ojQ0").resolve("a1aok"),import.meta.url).toString();var y;y=new URL("../"+i("5ojQ0").resolve("390yF"),import.meta.url).toString();var b;b=new URL("../"+i("5ojQ0").resolve("jrZHa"),import.meta.url).toString();a=i("idVGl");var H=i("c04jy");c=i("1CMLe");const E={"<":"‚á†",">":"‚á¢","^":"‚á°",v:"‚á£"},_=document.getElementById("canvas"),x=_.getContext("2d"),j=document.getElementById("input-form");document.getElementById("input").value="#.######\n#>>.<^<#\n#.<..<<#\n#>v.><>#\n#<^v^^>#\n######.#";const F=document.querySelector(".controls"),L=document.getElementById("solve");j.addEventListener("submit",(function(e){e.preventDefault();!async function(e){const n=d(e),o=(n.width+2)*V+8,l=(n.height+2)*V+8,i=(0,H.it)(n).filter((e=>"."!==e.value)).toArray(),u=window.innerWidth,g=Math.max(Math.min(Math.floor(u/o),4),1);A=g,(0,r.scaleCanvasToPixelRatio)(x,o,l,A),x.fillStyle=T,x.fillRect(0,0,_.width,_.height),x.translate(4*A,4*A);const j="Loading...";let U=Date.now();for(let e=0;e<j.length;e++)q([e,1],j[e],"white");const P=await async function(){const e=await Promise.all([O(t(m)),O(t(v)),O(t(p)),O(t(S)),O(t(R)),O(t(y)),O(t(b))]);return{grass:e[0],wallV:e[1],wallH:e[2],wallTL:e[3],wallTR:e[4],wallBL:e[5],wallBR:e[6]}}(),k=h(w(n,[0,-1],[n.width-1,n.height],0));U=Date.now()-U,U<1e3&&await(D=1e3-U,new Promise((e=>setTimeout(e,D))));var D;x.fillStyle=T,x.fillRect(-4,-4,_.width,_.height);let I=[0,-1],C=0,N=!1,G=!1,W=i;async function Y(){cancelAnimationFrame(Q),z();for(const[e]of k)await Z(I,e,100)}function Z(e,t,o){return new Promise((l=>{const[i,r]=e,[a,s]=t,d=a-i,u=s-r;let f=0;const h=W.map((e=>e.pos));function g(e){0===f&&(f=e);const a=e-f,s=Math.min(a/o,1);I=[i+d*s,r+u*s],W.forEach(((e,t)=>{const n="<"===e.value?-1:">"===e.value?1:0,o="^"===e.value?-1:"v"===e.value?1:0;W[t]={value:e.value,pos:[h[t][0]+n*s,h[t][1]+o*s]}})),K(n,C),s<1?Q=requestAnimationFrame(g):(cancelAnimationFrame(Q),I=t,C++,W.forEach(((e,t)=>{const o="<"===e.value?-1:">"===e.value?1:0,l="^"===e.value?-1:"v"===e.value?1:0,i=(0,c.mod)(h[t][0]+o,n.width),r=(0,c.mod)(h[t][1]+l,n.height);W[t]={value:e.value,pos:[i,r]}})),K(n,C),l())}g(0)}))}function K(e,t){x.fillStyle=T,x.fillRect(-4*A,-4*A,_.width,_.height);let n=new(0,s.Map2d);for(let t=-1;t<=e.width;t++)n.set([t,-1],"#"),n.set([t,e.height],"#");for(let t=0;t<e.height;t++)n.set([-1,t],"#"),n.set([e.width,t],"#");n.set([0,-1],"."),n.set([e.width-1,e.height],"."),n=(0,s.parseMap2d)(n.toString());for(const{pos:e,value:t}of n)if("#"===t){const t="#"===n.get([e[0]-1,e[1]]),o="#"===n.get([e[0]+1,e[1]]),l="#"===n.get([e[0],e[1]-1]),i="#"===n.get([e[0],e[1]+1]);B(e,o&&i?P.wallTL:t&&i||t&&!o?P.wallTR:o&&l||o&&!t?P.wallBL:t&&l?P.wallBR:o||t?P.wallH:P.wallV)}W.forEach((e=>{q(a.V.add(e.pos,a.V.vec(1,1)),E[e.value],M,!1)})),q([I[0]+1,I[1]+1],"üßå","green",!1),function(e){q(e,"üßù‚Äç‚ôÇÔ∏è","green",!1)}([n.width-2,n.height-1])}function z(){for(const e of F.children)e.disabled=!0}function J(){const e={up:a.V.eq([I[0],I[1]-1],[0,-1])||n.has([I[0],I[1]-1]),down:a.V.eq([I[0],I[1]+1],[n.width-1,n.height])||n.has([I[0],I[1]+1]),left:n.has([I[0]-1,I[1]]),right:n.has([I[0]+1,I[1]]),stay:!0};for(const t of F.children)t.disabled=N||G||!e[t.name]}function X(){x.fillStyle=T,x.fillRect(0,0,_.width,_.height);const e="You lost!";for(let t=0;t<e.length;t++)q([t,1],e[t],"red")}function $(){x.fillStyle=T,x.fillRect(0,0,_.width,_.height);const e="You won!";for(let t=0;t<e.length;t++)q([t,1],e[t],"green")}function ee(){a.V.eq(I,[n.width-1,n.height])?(G=!0,$()):(f.u(n,I,C)||f.d(n,I,C)||f.l(n,I,C)||f.r(n,I,C))&&(N=!0,X())}async function te(e){let t=[...I];"up"===e?t[1]--:"down"===e?t[1]++:"left"===e?t[0]--:"right"===e&&t[0]++,await Z(I,t,300),ee(),J()}K(n,C),J(),F.onclick=function(e){te(e.target.name)},L.onclick=function(){Y()}}((new FormData(this).get("input")?.toString()??"").trim())}));const V=10;let A=4;const T="#1e130a",M="#4dabf7";function q(e,t,n="white",o=!0){x.font=V*A+"px monospace",x.textAlign="center",x.textBaseline="middle";const l=V*A;o&&(x.fillStyle=T,x.fillRect(e[0]*l,e[1]*l,l,l)),x.fillStyle=n,x.fillText(t,e[0]*l+l/2,e[1]*l+l/2)}function B(e,t){x.imageSmoothingEnabled=!1,x.drawImage(t,0,0,V,V,e[0]*V*A,e[1]*V*A,V*A,V*A)}function O(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n,o.src=e}))}let Q=0;
//# sourceMappingURL=index.7b344632.js.map
